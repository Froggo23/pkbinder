{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ianchoefroggggy/WebstormProjects/pkbinder/pkbinder/src/lib/utils.js"],"sourcesContent":["import { clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs) {\n    return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAM;IACxB,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACxB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/ianchoefroggggy/WebstormProjects/pkbinder/pkbinder/src/lib/supabase.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n\nif (!supabaseUrl || !supabaseAnonKey) {\n    console.warn('Supabase credentials missing. Sign-in functionality will be disabled.');\n}\n\nexport const supabase = createClient(\n    supabaseUrl || 'https://placeholder.supabase.co',\n    supabaseAnonKey || 'placeholder'\n);\n"],"names":[],"mappings":";;;;AAEoB;AAFpB;;AAEA,MAAM;AACN,MAAM;AAEN;;AAIO,MAAM,WAAW,IAAA,iMAAY,EAChC,eAAe,mCACf,mBAAmB"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///Users/ianchoefroggggy/WebstormProjects/pkbinder/pkbinder/src/lib/api.js"],"sourcesContent":["import TCGdex, { Query } from '@tcgdex/sdk';\n\nconst tcgdex = new TCGdex('en');\n\nexport async function searchCards(query = '', page = 1, pageSize = 20, filters = {}) {\n    try {\n        console.log(`[TCGDex] Searching: \"${query}\" Page: ${page} Filters:`, filters);\n\n        const q = Query.create();\n\n        // 1. Text Search (Name)\n        if (query) {\n            q.contains('name', query);\n        }\n\n        // 2. Filters\n        if (filters.types) {\n            q.contains('types', filters.types);\n        }\n\n        if (filters.rarity) {\n            q.contains('rarity', filters.rarity);\n        }\n\n        if (filters.setName) {\n            q.contains('set.name', filters.setName);\n        }\n\n        // 3. Sorting\n        if (filters.orderBy) {\n            switch (filters.orderBy) {\n                case 'name': q.sort('name', 'ASC'); break;\n                case '-name': q.sort('name', 'DESC'); break;\n                case 'number': q.sort('localId', 'ASC'); break;\n                case 'set.releaseDate': q.sort('releaseDate', 'DESC'); break;\n                case '-set.releaseDate': q.sort('releaseDate', 'ASC'); break;\n                default: break;\n            }\n        }\n\n        // 4. Pagination & Image Buffer\n        // Fetch more cards than required to ensure we can filter out those without images\n        const fetchLimit = pageSize * 2;\n        q.paginate(page, fetchLimit);\n\n        // Fetch List\n        const listResults = await tcgdex.card.list(q);\n\n        if (!listResults || listResults.length === 0) {\n            return { data: [], page, pageSize, count: 0, totalCount: 0, hasMore: false };\n        }\n\n        // Filter out cards without images from the resume items\n        const resumesWithImages = listResults.filter(resume => resume.image);\n        const targetResumes = resumesWithImages.slice(0, pageSize);\n\n        // Parallel fetch of full details\n        const detailsPromises = targetResumes.map(async (resume) => {\n            try {\n                if (typeof resume.getCard === 'function') {\n                    return await resume.getCard();\n                } else {\n                    return await tcgdex.card.get(resume.id);\n                }\n            } catch (e) {\n                console.warn(`[TCGDex] Details failed for ${resume.id}`, e);\n                return null;\n            }\n        });\n\n        const fullCards = (await Promise.all(detailsPromises)).filter(c => c !== null);\n\n        // Normalize\n        const normalizedData = fullCards.map(card => {\n            const smallImg = card.image ? `${card.image}/low.webp` : null;\n            const largeImg = card.image ? `${card.image}/high.webp` : null;\n\n            return {\n                id: card.id,\n                name: card.name,\n                images: {\n                    small: smallImg,\n                    large: largeImg\n                },\n                set: {\n                    name: card.set?.name || 'Unknown'\n                },\n                number: card.localId,\n                rarity: card.rarity || 'Unknown'\n            };\n        });\n\n        return {\n            data: normalizedData,\n            page: page,\n            pageSize: pageSize,\n            count: normalizedData.length,\n            totalCount: 1000,\n            hasMore: listResults.length >= fetchLimit\n        };\n\n    } catch (error) {\n        console.error(\"[TCGDex] Error:\", error);\n        return { data: [], error: error.message };\n    }\n}\n\nexport async function getCardPrice(cardId) {\n    return null;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file:///Users/ianchoefroggggy/WebstormProjects/pkbinder/pkbinder/src/components/AddCardModal.js"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Search, Filter, Inbox, ChevronDown, Check, Loader2 } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { searchCards } from '@/lib/api';\n\n// --- Sub-components for the Modal ---\n\nconst FilterSection = ({ label, children }) => (\n    <div className=\"mb-4\">\n        <label className=\"block text-xs font-medium text-zinc-700 dark:text-zinc-300 mb-2\">{label}</label>\n        {children}\n    </div>\n);\n\nconst FilterButton = ({ label, icon: Icon }) => (\n    <button className=\"flex w-full items-center justify-between rounded-[6px] border border-slate-300 dark:border-zinc-700 bg-transparent py-2 px-3 text-[13px] font-[500] shadow-sm focus:border-indigo-400 dark:focus:border-indigo-500 focus:outline-none hover:bg-slate-50 dark:hover:bg-zinc-800/50 transition-colors text-zinc-700 dark:text-zinc-400 hover:text-zinc-500 dark:hover:text-white\">\n        <div className=\"flex items-center gap-2 flex-1 min-w-0\">\n            {Icon && <Icon className=\"w-4 h-4\" />}\n            <span className=\"truncate\">{label}</span>\n        </div>\n        <ChevronDown className=\"h-3.5 w-3.5 text-slate-400 dark:text-zinc-400 flex-shrink-0 ml-2\" />\n    </button>\n);\n\nconst TypeButton = ({ type, color, active, onClick }) => (\n    <button\n        onClick={onClick}\n        className={cn(\n            \"relative flex items-center justify-center w-7 h-7 rounded-lg transition-all duration-200 outline-none border hover:border-zinc-400 dark:hover:border-zinc-600 focus:ring-2 focus:ring-indigo-500\",\n            active\n                ? \"border-indigo-500 ring-2 ring-indigo-500 ring-offset-1 dark:ring-offset-zinc-900\"\n                : \"border-zinc-300 dark:border-zinc-700\"\n        )}\n        title={type}\n    >\n        <div className=\"w-5 h-5 rounded-full opacity-80\" style={{ backgroundColor: color }} />\n    </button>\n);\n\nconst TabButton = ({ label, active, onClick }) => (\n    <button\n        onClick={onClick}\n        className={cn(\n            \"w-full rounded-md py-2.5 px-3 text-sm font-medium leading-5 transition-all duration-200 text-left outline-none\",\n            active\n                ? \"bg-zinc-800 text-white\"\n                : \"text-zinc-500 hover:bg-zinc-800/50 hover:text-white\"\n        )}\n    >\n        {label}\n    </button>\n);\n\n// Helper for debouncing search\nfunction useDebounce(value, delay) {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n    useEffect(() => {\n        const handler = setTimeout(() => {\n            setDebouncedValue(value);\n        }, delay);\n        return () => {\n            clearTimeout(handler);\n        };\n    }, [value, delay]);\n    return debouncedValue;\n}\n\nexport default function AddCardModal({ isOpen, onClose, onAddCard }) {\n    const [activeTab, setActiveTab] = useState('Single Cards');\n    const [selectedCards, setSelectedCards] = useState([]);\n\n    // API State\n    const [query, setQuery] = useState('');\n    const [selectedType, setSelectedType] = useState(null); // New state for type\n    const [rarity, setRarity] = useState('');\n    const [sortBy, setSortBy] = useState('relevance');\n    const [setName, setSetName] = useState('');\n    const [page, setPage] = useState(1);\n    const [hasMore, setHasMore] = useState(true);\n\n    const debouncedQuery = useDebounce(query, 500);\n    const debouncedSetName = useDebounce(setName, 500);\n    const [cards, setCards] = useState([]);\n    const [loading, setLoading] = useState(false);\n\n    // Reset pagination when filters or tab change\n    useEffect(() => {\n        setPage(1);\n        setHasMore(true);\n        setCards([]);\n    }, [debouncedQuery, debouncedSetName, selectedType, rarity, sortBy, activeTab]);\n\n    // Fetch cards when page or filters change\n    useEffect(() => {\n        if (!isOpen) return;\n\n        const fetch = async () => {\n            setLoading(true);\n            try {\n                const res = await searchCards(debouncedQuery, page, 30, {\n                    types: selectedType,\n                    rarity: rarity,\n                    orderBy: sortBy,\n                    setName: debouncedSetName\n                });\n\n                if (page === 1) {\n                    setCards(res.data || []);\n                } else {\n                    setCards(prev => [...prev, ...res.data]);\n                }\n\n                // Use the hasMore flag from the API\n                setHasMore(res.hasMore ?? (res.data?.length === 30));\n            } catch (error) {\n                console.error(\"Error fetching cards:\", error);\n            }\n            setLoading(false);\n        };\n\n        fetch();\n    }, [isOpen, page, debouncedQuery, debouncedSetName, selectedType, rarity, sortBy, activeTab]);\n\n    const handleScroll = (e) => {\n        const { scrollTop, clientHeight, scrollHeight } = e.target;\n        // Load more when user is 50px from bottom, not loading, and has more data\n        if (scrollHeight - scrollTop <= clientHeight + 50 && !loading && hasMore) {\n            setPage(prev => prev + 1);\n        }\n    };\n\n    const handleTypeClick = (typeLabel) => {\n        // Toggle if already selected\n        setSelectedType(prev => prev === typeLabel ? null : typeLabel);\n    };\n\n    const toggleSelectCard = (card) => {\n        // We use the API ID directly for uniqueness\n        if (selectedCards.find(c => c.id === card.id)) {\n            setSelectedCards(selectedCards.filter(c => c.id !== card.id));\n        } else {\n            // Normalize card data for our app\n            const normalizedCard = {\n                id: card.id,\n                name: card.name,\n                // Fallback or specific size\n                image: card.images.large || card.images.small,\n                set: card.set.name,\n                number: card.number,\n                rarity: card.rarity\n            };\n            setSelectedCards([...selectedCards, normalizedCard]);\n        }\n    };\n\n    const handleAddCards = () => {\n        onAddCard(selectedCards);\n        setSelectedCards([]);\n        onClose();\n    };\n\n    // Mapping for colors to Type Names (simplified for Pokemon TCG)\n    const typeMap = [\n        { name: 'Fire', color: '#FF6B6B' },\n        { name: 'Water', color: '#4ECDC4' },\n        { name: 'Lightning', color: '#FFE66D' },\n        { name: 'Psychic', color: '#A18CD1' },\n        { name: 'Fighting', color: '#F79F1F' },\n        { name: 'Darkness', color: '#2C3A47' },\n        { name: 'Grass', color: '#48db48' },\n        { name: 'Colorless', color: '#dfe6e9' },\n        { name: 'Metal', color: '#b2bec3' },\n        { name: 'Dragon', color: '#fa8231' }\n    ];\n\n    if (!isOpen) return null;\n\n    return (\n        <AnimatePresence>\n            <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6\">\n                {/* Backdrop */}\n                <motion.div\n                    initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}\n                    className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\"\n                    onClick={onClose}\n                />\n\n                {/* Modal Panel */}\n                <motion.div\n                    initial={{ opacity: 0, scale: 0.95, y: 20 }}\n                    animate={{ opacity: 1, scale: 1, y: 0 }}\n                    exit={{ opacity: 0, scale: 0.95, y: 20 }}\n                    className=\"relative w-full h-full sm:w-[1400px] sm:max-w-[95vw] sm:h-[90vh] sm:max-h-[900px] bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 shadow-xl rounded-md flex flex-col overflow-hidden\"\n                >\n                    {/* Header */}\n                    <div className=\"flex items-center justify-between px-5 py-3 border-b border-zinc-200 dark:border-zinc-800 flex-shrink-0 bg-white dark:bg-zinc-900\">\n                        <div className=\"flex items-center gap-3\">\n                            <button className=\"flex items-center gap-2 px-3 py-2 rounded-md border border-zinc-300 dark:border-zinc-700 text-[13px] font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors text-zinc-700 dark:text-zinc-400\">\n                                <span className=\"text-base\">ðŸ‡ºðŸ‡¸</span>\n                                <span>Cards</span>\n                            </button>\n                            <h2 className=\"text-md font-semibold text-zinc-900 dark:text-zinc-50\">Add Cards</h2>\n                        </div>\n                        <button onClick={onClose} className=\"rounded-md p-2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 transition-colors\">\n                            <X className=\"h-5 w-5\" />\n                        </button>\n                    </div>\n\n                    <div className=\"flex flex-1 min-h-0 flex-col sm:flex-row\">\n\n                        {/* Left Sidebar - Filters */}\n                        <div className=\"hidden sm:flex w-64 border-r border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 flex-col flex-shrink-0\">\n                            <div className=\"p-3 border-b border-zinc-200 dark:border-zinc-800\">\n                                <div className=\"flex flex-col space-y-1\">\n                                    {['Single Cards', 'Sets', 'Sleeves'].map(tab => (\n                                        <TabButton\n                                            key={tab}\n                                            label={tab}\n                                            active={activeTab === tab}\n                                            onClick={() => setActiveTab(tab)}\n                                        />\n                                    ))}\n                                </div>\n                            </div>\n\n                            <div className=\"flex-1 overflow-y-auto px-3 py-4 [&::-webkit-scrollbar]:hidden\">\n                                <div className=\"flex items-center justify-between mb-3\">\n                                    <h3 className=\"text-[13px] font-medium text-zinc-800 dark:text-white\">Filters</h3>\n                                    <button\n                                        onClick={() => {\n                                            setQuery('');\n                                            setSetName('');\n                                            setSelectedType(null);\n                                            setRarity('');\n                                            setSortBy('relevance');\n                                        }}\n                                        className=\"text-[10px] font-medium text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-200\"\n                                    >\n                                        Reset\n                                    </button>\n                                </div>\n\n                                <div className=\"space-y-4\">\n                                    <FilterSection label=\"Sort by\">\n                                        <div className=\"relative\">\n                                            <select\n                                                value={sortBy}\n                                                onChange={(e) => setSortBy(e.target.value)}\n                                                className=\"w-full rounded-[6px] border border-slate-300 dark:border-zinc-700 bg-transparent py-2 px-3 text-[13px] font-[500] shadow-sm focus:border-indigo-400 focus:outline-none text-zinc-700 dark:text-zinc-400 appearance-none cursor-pointer\"\n                                            >\n                                                <option value=\"relevance\">Relevance</option>\n                                                <option value=\"name\">Name (A-Z)</option>\n                                                <option value=\"-name\">Name (Z-A)</option>\n                                                <option value=\"set.releaseDate\">Release Date (Newest)</option>\n                                                <option value=\"-set.releaseDate\">Release Date (Oldest)</option>\n                                                <option value=\"number\">Card Number</option>\n                                            </select>\n                                            <ChevronDown className=\"absolute right-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-slate-400 pointer-events-none\" />\n                                        </div>\n                                    </FilterSection>\n\n                                    <FilterSection label=\"Type\">\n                                        <div className=\"flex flex-wrap gap-2\">\n                                            {typeMap.map((t) => (\n                                                <TypeButton\n                                                    key={t.name}\n                                                    type={t.name}\n                                                    color={t.color}\n                                                    active={selectedType === t.name}\n                                                    onClick={() => handleTypeClick(t.name)}\n                                                />\n                                            ))}\n                                        </div>\n                                    </FilterSection>\n\n                                    <FilterSection label=\"Rarity\">\n                                        <div className=\"relative\">\n                                            <select\n                                                value={rarity}\n                                                onChange={(e) => setRarity(e.target.value)}\n                                                className=\"w-full rounded-[6px] border border-slate-300 dark:border-zinc-700 bg-transparent py-2 px-3 text-[13px] font-[500] shadow-sm focus:border-indigo-400 focus:outline-none text-zinc-700 dark:text-zinc-400 appearance-none cursor-pointer\"\n                                            >\n                                                <option value=\"\">All Rarities</option>\n                                                <option value=\"Common\">Common</option>\n                                                <option value=\"Uncommon\">Uncommon</option>\n                                                <option value=\"Rare\">Rare</option>\n                                                <option value=\"Rare Holo\">Rare Holo</option>\n                                                <option value=\"Ultra Rare\">Ultra Rare</option>\n                                                <option value=\"Secret Rare\">Secret Rare</option>\n                                                <option value=\"Promo\">Promo</option>\n                                            </select>\n                                            <ChevronDown className=\"absolute right-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-slate-400 pointer-events-none\" />\n                                        </div>\n                                    </FilterSection>\n\n                                    <FilterSection label=\"Set Name\">\n                                        <div className=\"relative\">\n                                            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 w-3.5 h-3.5\" />\n                                            <input\n                                                type=\"text\"\n                                                value={setName}\n                                                onChange={(e) => setSetName(e.target.value)}\n                                                placeholder=\"e.g. 'Silver Tempest'\"\n                                                className=\"w-full rounded-[6px] border border-slate-300 dark:border-zinc-700 bg-transparent py-2 pl-9 pr-3 text-[13px] font-[500] shadow-sm focus:border-indigo-400 focus:outline-none text-zinc-700 dark:text-zinc-400 placeholder:text-zinc-500\"\n                                            />\n                                        </div>\n                                    </FilterSection>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Center - Grid & Search */}\n                        <div className=\"flex-1 flex flex-col min-h-0 relative bg-white dark:bg-zinc-900\">\n                            {/* Search Bar */}\n                            <div className=\"px-3 sm:px-5 py-3 border-b border-zinc-200 dark:border-zinc-800 flex items-center gap-3 flex-shrink-0\">\n                                <div className=\"relative flex-1\">\n                                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 w-3.5 h-3.5\" />\n                                    <input\n                                        type=\"text\"\n                                        value={query}\n                                        onChange={(e) => setQuery(e.target.value)}\n                                        placeholder=\"Search Pokemon cards (e.g. 'Pikachu', 'Charizard')\"\n                                        className=\"w-full rounded-md border border-zinc-300 dark:border-zinc-700 bg-transparent py-2 sm:py-3 pl-9 pr-3 text-[13px] text-zinc-800 dark:text-zinc-200 focus:border-indigo-500 focus:outline-none placeholder:text-zinc-500 transition-all\"\n                                    />\n                                    {loading && (\n                                        <Loader2 className=\"absolute right-3 top-1/2 -translate-y-1/2 text-indigo-500 w-4 h-4 animate-spin\" />\n                                    )}\n                                </div>\n                            </div>\n\n                            {/* Grid Content */}\n                            <div\n                                className=\"flex-1 overflow-y-auto p-4 sm:p-6 min-h-0\"\n                                onScroll={handleScroll}\n                            >\n                                {cards.length === 0 && !loading ? (\n                                    <div className=\"h-full flex flex-col items-center justify-center text-zinc-400\">\n                                        <p>No cards found.</p>\n                                    </div>\n                                ) : (\n                                    <>\n                                        <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3\">\n                                            {cards.map((card, index) => {\n                                                const isSelected = selectedCards.find(c => c.id === card.id);\n                                                return (\n                                                    <div key={`${card.id}-${index}`} className=\"relative group w-full flex justify-center\">\n                                                        <div\n                                                            className=\"group relative aspect-[5/7] cursor-pointer transition-transform duration-200 hover:scale-[1.02]\"\n                                                            onClick={() => toggleSelectCard(card)}\n                                                        >\n                                                            <img\n                                                                src={card.images.small}\n                                                                alt={card.name}\n                                                                className={cn(\n                                                                    \"w-full h-full object-contain transition-all duration-200\",\n                                                                    isSelected ? \"opacity-60 grayscale-[0.5]\" : \"\"\n                                                                )}\n                                                                loading=\"lazy\"\n                                                            />\n                                                            {isSelected && (\n                                                                <div className=\"absolute inset-0 flex items-center justify-center bg-indigo-600/20 border-2 border-indigo-500 rounded-sm\">\n                                                                    <div className=\"bg-indigo-600 rounded-full p-1\">\n                                                                        <Check className=\"w-4 h-4 text-white\" />\n                                                                    </div>\n                                                                </div>\n                                                            )}\n                                                        </div>\n                                                    </div>\n                                                );\n                                            })}\n                                        </div>\n                                        {loading && (\n                                            <div className=\"w-full flex justify-center py-4\">\n                                                <Loader2 className=\"w-6 h-6 text-indigo-500 animate-spin\" />\n                                            </div>\n                                        )}\n                                    </>\n                                )}\n                            </div>\n\n                            {/* Footer Actions */}\n                            <div className=\"px-3 sm:px-5 py-3 border-t border-zinc-200 dark:border-zinc-800 flex items-center justify-between bg-zinc-50 dark:bg-zinc-900/50\">\n                                <div className=\"flex items-center gap-2\">\n                                    <span className=\"text-xs sm:text-sm font-medium text-zinc-700 dark:text-zinc-300\">Add to current page</span>\n                                    <div className=\"w-9 h-5 bg-zinc-300 dark:bg-zinc-700 rounded-full relative cursor-pointer\">\n                                        <div className=\"absolute left-0.5 top-0.5 w-4 h-4 bg-white rounded-full shadow-sm\" />\n                                    </div>\n                                </div>\n                                <div className=\"flex gap-2\">\n                                    <button className=\"hidden sm:flex items-center gap-2 px-4 py-2 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm font-semibold hover:shadow-md transition-all text-zinc-700 dark:text-zinc-200\">\n                                        <Inbox className=\"w-4 h-4\" />\n                                        Add to Tray\n                                    </button>\n                                    <button\n                                        onClick={handleAddCards}\n                                        disabled={selectedCards.length === 0}\n                                        className=\"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-semibold hover:bg-indigo-700 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\n                                    >\n                                        Add {selectedCards.length} cards\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Right Sidebar - Selected */}\n                        <div className=\"hidden lg:flex w-80 border-l border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 flex-col flex-shrink-0\">\n                            <div className=\"flex items-center justify-between px-4 py-3 border-b border-zinc-200 dark:border-zinc-800\">\n                                <h3 className=\"text-sm font-semibold text-zinc-700 dark:text-zinc-300\">Selected</h3>\n                            </div>\n                            <div className=\"flex-1 overflow-y-auto px-4 py-3\">\n                                {selectedCards.length === 0 ? (\n                                    <div className=\"h-full flex flex-col items-center justify-center text-zinc-400\">\n                                        <Inbox className=\"w-10 h-10 mb-3 opacity-20\" />\n                                        <p className=\"text-xs text-zinc-500\">Selected cards will appear here</p>\n                                    </div>\n                                ) : (\n                                    <div className=\"grid grid-cols-2 gap-2\">\n                                        {selectedCards.map(card => (\n                                            <div key={card.id} className=\"relative aspect-[5/7]\">\n                                                <img src={card.image} className=\"w-full h-full object-contain\" />\n                                                <button\n                                                    onClick={() => toggleSelectCard(card)}\n                                                    className=\"absolute top-1 right-1 bg-black/50 p-1 rounded-full text-white hover:bg-red-500/80 transition-colors\"\n                                                >\n                                                    <X className=\"w-3 h-3\" />\n                                                </button>\n                                            </div>\n                                        ))}\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n\n                    </div>\n                </motion.div>\n            </div>\n        </AnimatePresence>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;AANA;;;;;;AAQA,uCAAuC;AAEvC,MAAM,gBAAgB,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,iBACtC,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAM,WAAU;0BAAmE;;;;;;YACnF;;;;;;;KAHH;AAON,MAAM,eAAe,CAAC,EAAE,KAAK,EAAE,MAAM,IAAI,EAAE,iBACvC,6LAAC;QAAO,WAAU;;0BACd,6LAAC;gBAAI,WAAU;;oBACV,sBAAQ,6LAAC;wBAAK,WAAU;;;;;;kCACzB,6LAAC;wBAAK,WAAU;kCAAY;;;;;;;;;;;;0BAEhC,6LAAC,sOAAW;gBAAC,WAAU;;;;;;;;;;;;MANzB;AAUN,MAAM,aAAa,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,iBAChD,6LAAC;QACG,SAAS;QACT,WAAW,IAAA,4HAAE,EACT,oMACA,SACM,qFACA;QAEV,OAAO;kBAEP,cAAA,6LAAC;YAAI,WAAU;YAAkC,OAAO;gBAAE,iBAAiB;YAAM;;;;;;;;;;;MAXnF;AAeN,MAAM,YAAY,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,iBACzC,6LAAC;QACG,SAAS;QACT,WAAW,IAAA,4HAAE,EACT,kHACA,SACM,2BACA;kBAGT;;;;;;MAVH;AAcN,+BAA+B;AAC/B,SAAS,YAAY,KAAK,EAAE,KAAK;;IAC7B,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC;IACrD,IAAA,0KAAS;iCAAC;YACN,MAAM,UAAU;iDAAW;oBACvB,kBAAkB;gBACtB;gDAAG;YACH;yCAAO;oBACH,aAAa;gBACjB;;QACJ;gCAAG;QAAC;QAAO;KAAM;IACjB,OAAO;AACX;GAXS;AAaM,SAAS,aAAa,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE;;IAC/D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC,EAAE;IAErD,YAAY;IACZ,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC,OAAO,qBAAqB;IAC7E,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,MAAM,iBAAiB,YAAY,OAAO;IAC1C,MAAM,mBAAmB,YAAY,SAAS;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC,EAAE;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,8CAA8C;IAC9C,IAAA,0KAAS;kCAAC;YACN,QAAQ;YACR,WAAW;YACX,SAAS,EAAE;QACf;iCAAG;QAAC;QAAgB;QAAkB;QAAc;QAAQ;QAAQ;KAAU;IAE9E,0CAA0C;IAC1C,IAAA,0KAAS;kCAAC;YACN,IAAI,CAAC,QAAQ;YAEb,MAAM;gDAAQ;oBACV,WAAW;oBACX,IAAI;wBACA,MAAM,MAAM,MAAM,IAAA,mIAAW,EAAC,gBAAgB,MAAM,IAAI;4BACpD,OAAO;4BACP,QAAQ;4BACR,SAAS;4BACT,SAAS;wBACb;wBAEA,IAAI,SAAS,GAAG;4BACZ,SAAS,IAAI,IAAI,IAAI,EAAE;wBAC3B,OAAO;4BACH;gEAAS,CAAA,OAAQ;2CAAI;2CAAS,IAAI,IAAI;qCAAC;;wBAC3C;wBAEA,oCAAoC;wBACpC,WAAW,IAAI,OAAO,IAAK,IAAI,IAAI,EAAE,WAAW;oBACpD,EAAE,OAAO,OAAO;wBACZ,QAAQ,KAAK,CAAC,yBAAyB;oBAC3C;oBACA,WAAW;gBACf;;YAEA;QACJ;iCAAG;QAAC;QAAQ;QAAM;QAAgB;QAAkB;QAAc;QAAQ;QAAQ;KAAU;IAE5F,MAAM,eAAe,CAAC;QAClB,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,YAAY,EAAE,GAAG,EAAE,MAAM;QAC1D,0EAA0E;QAC1E,IAAI,eAAe,aAAa,eAAe,MAAM,CAAC,WAAW,SAAS;YACtE,QAAQ,CAAA,OAAQ,OAAO;QAC3B;IACJ;IAEA,MAAM,kBAAkB,CAAC;QACrB,6BAA6B;QAC7B,gBAAgB,CAAA,OAAQ,SAAS,YAAY,OAAO;IACxD;IAEA,MAAM,mBAAmB,CAAC;QACtB,4CAA4C;QAC5C,IAAI,cAAc,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK,EAAE,GAAG;YAC3C,iBAAiB,cAAc,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK,EAAE;QAC/D,OAAO;YACH,kCAAkC;YAClC,MAAM,iBAAiB;gBACnB,IAAI,KAAK,EAAE;gBACX,MAAM,KAAK,IAAI;gBACf,4BAA4B;gBAC5B,OAAO,KAAK,MAAM,CAAC,KAAK,IAAI,KAAK,MAAM,CAAC,KAAK;gBAC7C,KAAK,KAAK,GAAG,CAAC,IAAI;gBAClB,QAAQ,KAAK,MAAM;gBACnB,QAAQ,KAAK,MAAM;YACvB;YACA,iBAAiB;mBAAI;gBAAe;aAAe;QACvD;IACJ;IAEA,MAAM,iBAAiB;QACnB,UAAU;QACV,iBAAiB,EAAE;QACnB;IACJ;IAEA,gEAAgE;IAChE,MAAM,UAAU;QACZ;YAAE,MAAM;YAAQ,OAAO;QAAU;QACjC;YAAE,MAAM;YAAS,OAAO;QAAU;QAClC;YAAE,MAAM;YAAa,OAAO;QAAU;QACtC;YAAE,MAAM;YAAW,OAAO;QAAU;QACpC;YAAE,MAAM;YAAY,OAAO;QAAU;QACrC;YAAE,MAAM;YAAY,OAAO;QAAU;QACrC;YAAE,MAAM;YAAS,OAAO;QAAU;QAClC;YAAE,MAAM;YAAa,OAAO;QAAU;QACtC;YAAE,MAAM;YAAS,OAAO;QAAU;QAClC;YAAE,MAAM;YAAU,OAAO;QAAU;KACtC;IAED,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACI,6LAAC,+MAAe;kBACZ,cAAA,6LAAC;YAAI,WAAU;;8BAEX,6LAAC,uMAAM,CAAC,GAAG;oBACP,SAAS;wBAAE,SAAS;oBAAE;oBAAG,SAAS;wBAAE,SAAS;oBAAE;oBAAG,MAAM;wBAAE,SAAS;oBAAE;oBACrE,WAAU;oBACV,SAAS;;;;;;8BAIb,6LAAC,uMAAM,CAAC,GAAG;oBACP,SAAS;wBAAE,SAAS;wBAAG,OAAO;wBAAM,GAAG;oBAAG;oBAC1C,SAAS;wBAAE,SAAS;wBAAG,OAAO;wBAAG,GAAG;oBAAE;oBACtC,MAAM;wBAAE,SAAS;wBAAG,OAAO;wBAAM,GAAG;oBAAG;oBACvC,WAAU;;sCAGV,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAO,WAAU;;8DACd,6LAAC;oDAAK,WAAU;8DAAY;;;;;;8DAC5B,6LAAC;8DAAK;;;;;;;;;;;;sDAEV,6LAAC;4CAAG,WAAU;sDAAwD;;;;;;;;;;;;8CAE1E,6LAAC;oCAAO,SAAS;oCAAS,WAAU;8CAChC,cAAA,6LAAC,oMAAC;wCAAC,WAAU;;;;;;;;;;;;;;;;;sCAIrB,6LAAC;4BAAI,WAAU;;8CAGX,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDACX,cAAA,6LAAC;gDAAI,WAAU;0DACV;oDAAC;oDAAgB;oDAAQ;iDAAU,CAAC,GAAG,CAAC,CAAA,oBACrC,6LAAC;wDAEG,OAAO;wDACP,QAAQ,cAAc;wDACtB,SAAS,IAAM,aAAa;uDAHvB;;;;;;;;;;;;;;;sDASrB,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAG,WAAU;sEAAwD;;;;;;sEACtE,6LAAC;4DACG,SAAS;gEACL,SAAS;gEACT,WAAW;gEACX,gBAAgB;gEAChB,UAAU;gEACV,UAAU;4DACd;4DACA,WAAU;sEACb;;;;;;;;;;;;8DAKL,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAc,OAAM;sEACjB,cAAA,6LAAC;gEAAI,WAAU;;kFACX,6LAAC;wEACG,OAAO;wEACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;wEACzC,WAAU;;0FAEV,6LAAC;gFAAO,OAAM;0FAAY;;;;;;0FAC1B,6LAAC;gFAAO,OAAM;0FAAO;;;;;;0FACrB,6LAAC;gFAAO,OAAM;0FAAQ;;;;;;0FACtB,6LAAC;gFAAO,OAAM;0FAAkB;;;;;;0FAChC,6LAAC;gFAAO,OAAM;0FAAmB;;;;;;0FACjC,6LAAC;gFAAO,OAAM;0FAAS;;;;;;;;;;;;kFAE3B,6LAAC,sOAAW;wEAAC,WAAU;;;;;;;;;;;;;;;;;sEAI/B,6LAAC;4DAAc,OAAM;sEACjB,cAAA,6LAAC;gEAAI,WAAU;0EACV,QAAQ,GAAG,CAAC,CAAC,kBACV,6LAAC;wEAEG,MAAM,EAAE,IAAI;wEACZ,OAAO,EAAE,KAAK;wEACd,QAAQ,iBAAiB,EAAE,IAAI;wEAC/B,SAAS,IAAM,gBAAgB,EAAE,IAAI;uEAJhC,EAAE,IAAI;;;;;;;;;;;;;;;sEAU3B,6LAAC;4DAAc,OAAM;sEACjB,cAAA,6LAAC;gEAAI,WAAU;;kFACX,6LAAC;wEACG,OAAO;wEACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;wEACzC,WAAU;;0FAEV,6LAAC;gFAAO,OAAM;0FAAG;;;;;;0FACjB,6LAAC;gFAAO,OAAM;0FAAS;;;;;;0FACvB,6LAAC;gFAAO,OAAM;0FAAW;;;;;;0FACzB,6LAAC;gFAAO,OAAM;0FAAO;;;;;;0FACrB,6LAAC;gFAAO,OAAM;0FAAY;;;;;;0FAC1B,6LAAC;gFAAO,OAAM;0FAAa;;;;;;0FAC3B,6LAAC;gFAAO,OAAM;0FAAc;;;;;;0FAC5B,6LAAC;gFAAO,OAAM;0FAAQ;;;;;;;;;;;;kFAE1B,6LAAC,sOAAW;wEAAC,WAAU;;;;;;;;;;;;;;;;;sEAI/B,6LAAC;4DAAc,OAAM;sEACjB,cAAA,6LAAC;gEAAI,WAAU;;kFACX,6LAAC,mNAAM;wEAAC,WAAU;;;;;;kFAClB,6LAAC;wEACG,MAAK;wEACL,OAAO;wEACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;wEAC1C,aAAY;wEACZ,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8CASlC,6LAAC;oCAAI,WAAU;;sDAEX,6LAAC;4CAAI,WAAU;sDACX,cAAA,6LAAC;gDAAI,WAAU;;kEACX,6LAAC,mNAAM;wDAAC,WAAU;;;;;;kEAClB,6LAAC;wDACG,MAAK;wDACL,OAAO;wDACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wDACxC,aAAY;wDACZ,WAAU;;;;;;oDAEb,yBACG,6LAAC,+NAAO;wDAAC,WAAU;;;;;;;;;;;;;;;;;sDAM/B,6LAAC;4CACG,WAAU;4CACV,UAAU;sDAET,MAAM,MAAM,KAAK,KAAK,CAAC,wBACpB,6LAAC;gDAAI,WAAU;0DACX,cAAA,6LAAC;8DAAE;;;;;;;;;;qEAGP;;kEACI,6LAAC;wDAAI,WAAU;kEACV,MAAM,GAAG,CAAC,CAAC,MAAM;4DACd,MAAM,aAAa,cAAc,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK,EAAE;4DAC3D,qBACI,6LAAC;gEAAgC,WAAU;0EACvC,cAAA,6LAAC;oEACG,WAAU;oEACV,SAAS,IAAM,iBAAiB;;sFAEhC,6LAAC;4EACG,KAAK,KAAK,MAAM,CAAC,KAAK;4EACtB,KAAK,KAAK,IAAI;4EACd,WAAW,IAAA,4HAAE,EACT,4DACA,aAAa,+BAA+B;4EAEhD,SAAQ;;;;;;wEAEX,4BACG,6LAAC;4EAAI,WAAU;sFACX,cAAA,6LAAC;gFAAI,WAAU;0FACX,cAAA,6LAAC,gNAAK;oFAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;+DAjB3B,GAAG,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO;;;;;wDAwBvC;;;;;;oDAEH,yBACG,6LAAC;wDAAI,WAAU;kEACX,cAAA,6LAAC,+NAAO;4DAAC,WAAU;;;;;;;;;;;;;;;;;;sDAQvC,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAK,WAAU;sEAAkE;;;;;;sEAClF,6LAAC;4DAAI,WAAU;sEACX,cAAA,6LAAC;gEAAI,WAAU;;;;;;;;;;;;;;;;;8DAGvB,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAO,WAAU;;8EACd,6LAAC,gNAAK;oEAAC,WAAU;;;;;;gEAAY;;;;;;;sEAGjC,6LAAC;4DACG,SAAS;4DACT,UAAU,cAAc,MAAM,KAAK;4DACnC,WAAU;;gEACb;gEACQ,cAAc,MAAM;gEAAC;;;;;;;;;;;;;;;;;;;;;;;;;8CAO1C,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDACX,cAAA,6LAAC;gDAAG,WAAU;0DAAyD;;;;;;;;;;;sDAE3E,6LAAC;4CAAI,WAAU;sDACV,cAAc,MAAM,KAAK,kBACtB,6LAAC;gDAAI,WAAU;;kEACX,6LAAC,gNAAK;wDAAC,WAAU;;;;;;kEACjB,6LAAC;wDAAE,WAAU;kEAAwB;;;;;;;;;;;qEAGzC,6LAAC;gDAAI,WAAU;0DACV,cAAc,GAAG,CAAC,CAAA,qBACf,6LAAC;wDAAkB,WAAU;;0EACzB,6LAAC;gEAAI,KAAK,KAAK,KAAK;gEAAE,WAAU;;;;;;0EAChC,6LAAC;gEACG,SAAS,IAAM,iBAAiB;gEAChC,WAAU;0EAEV,cAAA,6LAAC,oMAAC;oEAAC,WAAU;;;;;;;;;;;;uDANX,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoB7D;IAnXwB;;QAaG;QACE;;;MAdL"}},
    {"offset": {"line": 1257, "column": 0}, "map": {"version":3,"sources":["file:///Users/ianchoefroggggy/WebstormProjects/pkbinder/pkbinder/src/app/page.js"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Search, Grid, Layout, Settings, Share2, Plus, Filter, Menu, X, ChevronLeft, ChevronRight, Save, Loader2, LogOut, Check } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport Link from 'next/link';\nimport { supabase } from '@/lib/supabase';\nimport AddCardModal from '@/components/AddCardModal';\n\n// --- Main Page Component ---\n\nexport default function Home() {\n    // 1. STATE DEFINITIONS (Must be first)\n    const [sidebarOpen, setSidebarOpen] = useState(true);\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [currentSpreadIndex, setCurrentSpreadIndex] = useState(0);\n    const [currentAddingSlot, setCurrentAddingSlot] = useState(null);\n    const [addingToLeftPage, setAddingToLeftPage] = useState(false);\n    const [showPageCounter, setShowPageCounter] = useState(false);\n    const [user, setUser] = useState(null);\n    const [isSaving, setIsSaving] = useState(false);\n    const [saveStatus, setSaveStatus] = useState(null);\n    const [binderId, setBinderId] = useState(null);\n    const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\n\n    // Binder Data State (initialized with simple defaults to prevent any TDZ issues)\n    const [titleData, setTitleData] = useState({ title: 'My Collection', description: 'Start organizing your cards' });\n    const [cardPages, setCardPages] = useState([{ id: 0, slots: Array(9).fill(null) }]);\n\n    // 2. HELPER FUNCTIONS (Hoisted manually or via function declarations)\n\n    function getLeftPage() {\n        if (currentSpreadIndex === 0) return { type: 'title', data: titleData };\n        const cardPageIndex = (currentSpreadIndex * 2) - 1;\n        return {\n            type: 'cards',\n            data: cardPages[cardPageIndex] || { id: `empty-${cardPageIndex}`, slots: Array(9).fill(null) },\n            index: cardPageIndex\n        };\n    }\n\n    function getRightPage() {\n        const cardPageIndex = currentSpreadIndex === 0 ? 0 : (currentSpreadIndex * 2);\n        return {\n            type: 'cards',\n            data: cardPages[cardPageIndex] || { id: `empty-${cardPageIndex}`, slots: Array(9).fill(null) },\n            index: cardPageIndex\n        };\n    }\n\n    const leftPage = getLeftPage();\n    const rightPage = getRightPage();\n\n    function handleSlotClick(slotIndex, isLeftPage) {\n        setCurrentAddingSlot(slotIndex);\n        setAddingToLeftPage(isLeftPage);\n        setIsModalOpen(true);\n    }\n\n    function handleAddCards(newCards) {\n        if (currentAddingSlot === null) return;\n        const targetPageIndex = addingToLeftPage ? leftPage.index : rightPage.index;\n\n        setCardPages(prevPages => {\n            let updatedPages = [...prevPages];\n            while (updatedPages.length <= targetPageIndex) {\n                updatedPages.push({ id: Date.now() + updatedPages.length, slots: Array(9).fill(null) });\n            }\n            const updatedSlots = [...updatedPages[targetPageIndex].slots];\n            if (newCards.length > 0 && updatedSlots[currentAddingSlot] === null) {\n                updatedSlots[currentAddingSlot] = newCards[0];\n            }\n            updatedPages[targetPageIndex] = { ...updatedPages[targetPageIndex], slots: updatedSlots };\n            return updatedPages;\n        });\n        setCurrentAddingSlot(null);\n        setAddingToLeftPage(false);\n    }\n\n    function handleDeleteCard(slotIndex, isLeftPage) {\n        const targetPageIndex = isLeftPage ? leftPage.index : rightPage.index;\n        setCardPages(prevPages => {\n            const updatedPages = [...prevPages];\n            if (!updatedPages[targetPageIndex]) return prevPages;\n            const updatedSlots = [...updatedPages[targetPageIndex].slots];\n            updatedSlots[slotIndex] = null;\n            updatedPages[targetPageIndex] = { ...updatedPages[targetPageIndex], slots: updatedSlots };\n            return updatedPages;\n        });\n    }\n\n    function handleAddPage() {\n        const newPage = { id: Date.now(), slots: Array(9).fill(null) };\n        setCardPages([...cardPages, newPage]);\n    }\n\n    function handleTitleChange(newTitle) {\n        setTitleData(prev => ({ ...prev, title: newTitle }));\n    }\n\n    function handleDescriptionChange(newDescription) {\n        setTitleData(prev => ({ ...prev, description: newDescription }));\n    }\n\n    function goToPreviousSpread() {\n        if (currentSpreadIndex > 0) setCurrentSpreadIndex(currentSpreadIndex - 1);\n    }\n\n    function goToNextSpread() {\n        setCurrentSpreadIndex(currentSpreadIndex + 1);\n    }\n\n    async function handleSave() {\n        if (!user) {\n            alert('Please sign in to save your binder.');\n            return;\n        }\n        setIsSaving(true);\n        setSaveStatus(null);\n        try {\n            const payload = {\n                user_id: user.id,\n                title: titleData.title,\n                description: titleData.description,\n                data: cardPages,\n                updated_at: new Date().toISOString()\n            };\n            let result;\n            if (binderId) {\n                result = await supabase.from('binders').update(payload).eq('id', binderId);\n            } else {\n                result = await supabase.from('binders').insert([payload]).select();\n                if (result.data?.[0]) setBinderId(result.data[0].id);\n            }\n            if (result.error) throw result.error;\n            setSaveStatus('success');\n            setHasUnsavedChanges(false);\n            setTimeout(() => setSaveStatus(null), 3000);\n        } catch (error) {\n            console.error('Error saving binder:', error);\n            setSaveStatus('error');\n            setTimeout(() => setSaveStatus(null), 3000);\n        } finally {\n            setIsSaving(false);\n        }\n    }\n\n    async function handleSignOut() {\n        await supabase.auth.signOut();\n        setBinderId(null);\n        setCardPages([{ id: 0, slots: Array(9).fill(null) }]);\n        setTitleData({ title: 'My Collection', description: 'Start organizing your cards' });\n        localStorage.removeItem('pkbinder_current_draft');\n        setHasUnsavedChanges(false);\n    }\n\n    // 3. EFFECTS (Last, to ensure all state and functions are defined)\n\n    // Initial load/hydration\n    useEffect(() => {\n        // Hydrate from localStorage first\n        const savedData = localStorage.getItem('pkbinder_current_draft');\n        if (savedData) {\n            try {\n                const parsed = JSON.parse(savedData);\n                if (parsed.titleData) setTitleData(parsed.titleData);\n                if (parsed.cardPages) setCardPages(parsed.cardPages);\n            } catch (e) { }\n        }\n\n        // Detect user session\n        const checkUser = async () => {\n            const { data: { session } } = await supabase.auth.getSession();\n            const currentUser = session?.user || null;\n            setUser(currentUser);\n\n            if (currentUser) {\n                const { data, error } = await supabase\n                    .from('binders')\n                    .select('*')\n                    .eq('user_id', currentUser.id)\n                    .order('updated_at', { ascending: false })\n                    .limit(1)\n                    .single();\n\n                if (data && !error) {\n                    // Always set binderId so autosave knows where to go\n                    setBinderId(data.id);\n\n                    // ONLY overwrite if we don't already have local data\n                    if (!savedData) {\n                        setTitleData({ title: data.title, description: data.description });\n                        setCardPages(data.data || [{ id: 0, slots: Array(9).fill(null) }]);\n                        setTimeout(() => setHasUnsavedChanges(false), 200);\n                    }\n                }\n            }\n        };\n        checkUser();\n\n        const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {\n            setUser(session?.user || null);\n        });\n\n        return () => subscription.unsubscribe();\n    }, []);\n\n    // Sync to localStorage\n    useEffect(() => {\n        const draft = { titleData, cardPages };\n        localStorage.setItem('pkbinder_current_draft', JSON.stringify(draft));\n        setHasUnsavedChanges(true);\n    }, [titleData, cardPages]);\n\n    // Periodic cloud autosave\n    useEffect(() => {\n        const interval = setInterval(() => {\n            if (user && hasUnsavedChanges && !isSaving) {\n                handleSave();\n            }\n        }, 60000);\n        return () => clearInterval(interval);\n    }, [user, hasUnsavedChanges, isSaving, titleData, cardPages, binderId]);\n\n    // Page counter popup\n    useEffect(() => {\n        setShowPageCounter(true);\n        const timer = setTimeout(() => setShowPageCounter(false), 2000);\n        return () => clearTimeout(timer);\n    }, [currentSpreadIndex]);\n\n    return (\n        <div className=\"min-h-screen bg-background text-foreground flex flex-col overflow-hidden\">\n            <AddCardModal\n                isOpen={isModalOpen}\n                onClose={() => {\n                    setIsModalOpen(false);\n                    setCurrentAddingSlot(null);\n                }}\n                onAddCard={handleAddCards}\n            />\n\n            <header className=\"h-14 border-b border-border flex items-center justify-between px-4 bg-background/50 backdrop-blur-md sticky top-0 z-50\">\n                <div className=\"flex items-center gap-4\">\n                    <button onClick={() => setSidebarOpen(!sidebarOpen)} className=\"p-1 hover:bg-secondary rounded\">\n                        <Menu size={20} />\n                    </button>\n                    <span className=\"font-bold text-xl tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400\">\n                        pkbinder\n                    </span>\n                </div>\n\n                <div className=\"flex items-center gap-3\">\n                    {user && (\n                        <button\n                            onClick={handleSave}\n                            disabled={isSaving}\n                            className={cn(\n                                \"flex items-center gap-2 h-9 px-4 rounded-full text-sm font-medium transition-all shadow-lg\",\n                                saveStatus === 'success' ? \"bg-green-600 text-white\" : saveStatus === 'error' ? \"bg-red-600 text-white\" : \"bg-white/10 text-white hover:bg-white/20 border border-white/10\"\n                            )}\n                        >\n                            {isSaving ? <Loader2 size={16} className=\"animate-spin\" /> : saveStatus === 'success' ? <Check size={16} /> : <Save size={16} />}\n                            <span>{saveStatus === 'success' ? 'Saved' : isSaving ? 'Saving...' : hasUnsavedChanges ? 'Unsaved Changes' : 'Saved to Cloud'}</span>\n                            {hasUnsavedChanges && !isSaving && !saveStatus && (\n                                <div className=\"w-2 h-2 rounded-full bg-amber-500 animate-pulse ml-1\" title=\"Unsaved changes\" />\n                            )}\n                        </button>\n                    )}\n\n                    {user ? (\n                        <div className=\"flex items-center gap-3\">\n                            <div className=\"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-primary-foreground font-bold text-xs border border-primary/30\">\n                                {user.email?.[0].toUpperCase()}\n                            </div>\n                            <button onClick={handleSignOut} className=\"p-2 hover:bg-secondary rounded-full text-muted-foreground hover:text-foreground transition-colors\" title=\"Sign Out\">\n                                <LogOut size={18} />\n                            </button>\n                        </div>\n                    ) : (\n                        <Link href=\"/auth\">\n                            <button className=\"h-9 px-4 rounded-full bg-primary text-white text-sm font-medium hover:bg-primary/90 transition-colors shadow-[0_0_15px_-3px_var(--primary)]\">\n                                Sign In\n                            </button>\n                        </Link>\n                    )}\n                </div>\n            </header>\n\n            <div className=\"flex flex-1 overflow-hidden\">\n                <aside className={cn(\n                    \"w-64 border-r border-border bg-card/30 p-4 space-y-6 hidden md:block transition-all duration-300\",\n                    !sidebarOpen && \"w-0 p-0 overflow-hidden border-none\"\n                )}>\n                    <div className=\"space-y-1\">\n                        <SidebarItem icon={Layout} label=\"My Binders\" active />\n                        <SidebarItem icon={Grid} label=\"Collection\" />\n                        <SidebarItem icon={Search} label=\"Browse Database\" />\n                    </div>\n                    <div>\n                        <h3 className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2 px-3\">Binder Settings</h3>\n                        <div className=\"space-y-1\">\n                            <SidebarItem icon={Settings} label=\"Customize\" />\n                            <SidebarItem icon={Share2} label=\"Share Binder\" />\n                            <SidebarItem icon={Filter} label=\"Sort & Filter\" />\n                        </div>\n                    </div>\n                </aside>\n\n                <main className=\"flex-1 overflow-auto p-4 md:p-8 flex justify-center items-center bg-black/50\">\n                    <div className=\"w-full max-w-7xl flex gap-6 items-center h-[90vh] relative\">\n                        <button onClick={goToPreviousSpread} disabled={currentSpreadIndex === 0} className={cn(\"p-3 rounded-full bg-zinc-800 hover:bg-zinc-700 transition-colors z-50\", currentSpreadIndex === 0 && \"opacity-50 cursor-default hover:bg-zinc-800\")}>\n                            <ChevronLeft size={24} />\n                        </button>\n                        <div className=\"flex-1 flex justify-center gap-4 h-full relative perspective-1000\">\n                            <div className=\"flex-none w-[600px] aspect-[100/136] relative z-10\">\n                                {leftPage.type === 'title' ? (\n                                    <TitlePage title={leftPage.data.title} description={leftPage.data.description} onTitleChange={handleTitleChange} onDescriptionChange={handleDescriptionChange} />\n                                ) : (\n                                    <BinderPage slots={leftPage.data.slots} onSlotClick={(slotIndex) => handleSlotClick(slotIndex, true)} onDeleteCard={(slotIndex) => handleDeleteCard(slotIndex, true)} />\n                                )}\n                            </div>\n                            <div className=\"flex-none w-[600px] aspect-[100/136] relative z-10\">\n                                <BinderPage slots={rightPage.data.slots} onSlotClick={(slotIndex) => handleSlotClick(slotIndex, false)} onDeleteCard={(slotIndex) => handleDeleteCard(slotIndex, false)} />\n                            </div>\n                        </div>\n                        {(() => {\n                            const nextSpreadLeftPageIndex = 2 * currentSpreadIndex + 1;\n                            const hasNextSpread = nextSpreadLeftPageIndex < cardPages.length;\n                            if (hasNextSpread) {\n                                return <button onClick={goToNextSpread} className=\"p-3 rounded-full bg-zinc-800 hover:bg-zinc-700 transition-colors z-50 text-white shadow-lg border border-zinc-700\"><ChevronRight size={24} /></button>;\n                            } else {\n                                return <button onClick={handleAddPage} className=\"p-3 rounded-full bg-primary hover:bg-primary/90 transition-colors shadow-lg group z-50\" title=\"Add New Page\"><Plus size={24} className=\"group-hover:rotate-90 transition-transform duration-300\" /></button>;\n                            }\n                        })()}\n                        <AnimatePresence mode=\"wait\">\n                            {showPageCounter && (\n                                <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} transition={{ duration: 0.3 }} className=\"absolute bottom-6 left-1/2 -translate-x-1/2 bg-zinc-800/80 backdrop-blur-md px-3 py-1 rounded-full text-xs font-medium text-white/50 shadow-sm border border-white/5 pointer-events-none z-50 select-none\">\n                                    {currentSpreadIndex + 1} / {Math.max(1, Math.ceil((cardPages.length + 1) / 2))}\n                                </motion.div>\n                            )}\n                        </AnimatePresence>\n                    </div>\n                </main>\n            </div>\n        </div>\n    );\n}\n\n// --- Sub-components (Moved to bottom to ensure Home evaluates first) ---\n\nfunction SidebarItem({ icon: Icon, label, active }) {\n    return (\n        <button className={cn(\"flex items-center gap-3 w-full px-3 py-2 rounded-md transition-colors text-sm font-medium\", active ? \"bg-primary/10 text-primary\" : \"text-muted-foreground hover:bg-secondary hover:text-foreground\")}>\n            <Icon size={18} />\n            {label && <span>{label}</span>}\n        </button>\n    );\n}\n\nfunction CardSlot({ card, onClick, onDelete }) {\n    const [showDelete, setShowDelete] = useState(false);\n    const [isHovered, setIsHovered] = useState(false);\n    return (\n        <div onMouseEnter={() => card ? setShowDelete(true) : setIsHovered(true)} onMouseLeave={() => { setShowDelete(false); setIsHovered(false); }} onClick={onClick} className={cn(\"h-full w-full rounded-xl overflow-hidden relative group transition-all duration-300\", !card && \"card-slot-empty cursor-pointer bg-zinc-800/30\", !card && isHovered && \"shadow-[0_0_12px_rgba(99,102,241,0.5)]\")}>\n            {card ? (\n                <motion.div layoutId={`card-${card.id}`} className=\"w-full h-full relative\" whileHover={{ scale: 1.05, zIndex: 10 }}>\n                    <img src={card.image} alt={card.name} className=\"w-full h-full object-contain p-1\" loading=\"lazy\" />\n                    <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors\" />\n                    <AnimatePresence>\n                        {showDelete && (\n                            <motion.button initial={{ opacity: 0, scale: 0.8 }} animate={{ opacity: 1, scale: 1 }} exit={{ opacity: 0, scale: 0.8 }} onClick={(e) => { e.stopPropagation(); onDelete(); }} className=\"absolute top-2 right-2 bg-red-600 hover:bg-red-500 text-white rounded-full p-1.5 shadow-lg z-20 transition-colors\">\n                                <X size={16} />\n                            </motion.button>\n                        )}\n                    </AnimatePresence>\n                </motion.div>\n            ) : (\n                <div className=\"flex items-center justify-center h-full relative\">\n                    <AnimatePresence>{isHovered && <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: 20 }} className=\"px-3 py-1.5 bg-zinc-700 text-zinc-200 text-sm font-medium rounded-md shadow-lg\">Add Card</motion.div>}</AnimatePresence>\n                </div>\n            )}\n        </div>\n    );\n}\n\nfunction TitlePage({ title, description, onTitleChange, onDescriptionChange }) {\n    return (\n        <div className=\"binder-page bg-card rounded-xl p-6 md:p-8 h-full flex flex-col justify-center items-center text-center gap-6\">\n            <input type=\"text\" value={title} onChange={(e) => onTitleChange(e.target.value)} className=\"text-6xl font-bold bg-transparent border-none outline-none text-center w-full text-white placeholder-gray-600 focus:text-primary transition-colors\" placeholder=\"title\" />\n            <textarea value={description} onChange={(e) => onDescriptionChange(e.target.value)} className=\"text-lg text-gray-400 bg-transparent border-none outline-none text-center w-full resize-none placeholder-gray-700 focus:text-gray-300 transition-colors\" placeholder=\"description\" rows={3} />\n        </div>\n    );\n}\n\nfunction BinderPage({ slots, onSlotClick, onDeleteCard }) {\n    return (\n        <div className=\"binder-page bg-card rounded-xl p-1.5 grid grid-cols-3 grid-rows-3 gap-1.5 h-full\">\n            {slots.map((card, i) => (\n                <CardSlot key={i} card={card} onClick={() => !card && onSlotClick(i)} onDelete={() => card && onDeleteCard(i)} />\n            ))}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}